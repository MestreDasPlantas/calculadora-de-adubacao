<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Profissional de Aduba√ß√£o NPK | Hortali√ßas</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Tela de Login -->
    <div id="loginScreen" class="login-container">
        <div class="login-card">
            <div class="login-header">
                <div class="logo-icon">üå±</div>
                <h1>Calculadora de Aduba√ß√£o NPK</h1>
                <p>Profissional para Hortali√ßas</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="input-group">
                    <label for="username">Usu√°rio</label>
                    <input type="text" id="username" placeholder="Digite seu usu√°rio" required autocomplete="username">
                </div>
                <div class="input-group">
                    <label for="password">Senha</label>
                    <input type="password" id="password" placeholder="Digite sua senha" required autocomplete="current-password">
                </div>
                <button type="submit" class="btn-login">Entrar</button>
                <div id="loginError" class="error-message"></div>
            </form>
        </div>
    </div>

    <!-- Aplicativo Principal (oculto at√© login) -->
    <div id="appScreen" class="app-container hidden">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-title">
                    <span class="header-icon">üå±</span>
                    <h1>Calculadora de Aduba√ß√£o NPK</h1>
                </div>
                <button id="logoutBtn" class="btn-logout" title="Sair">
                    <span>üö™</span> Sair
                </button>
            </div>
        </header>

        <!-- Navega√ß√£o por Abas -->
        <nav class="tabs-navigation">
            <button class="tab-button active" onclick="showTab('calculadora')">
                üßÆ Calculadora
            </button>
            <button class="tab-button" onclick="showTab('tratos')">
                üìö Tratos Culturais
            </button>
            <button class="tab-button" onclick="showTab('ajuda')">
                ‚ÑπÔ∏è Como Usar
            </button>
        </nav>

        <!-- Conte√∫do Principal -->
        <main class="main-content">
            <!-- Aba Calculadora -->
            <div id="tab-calculadora" class="tab-content active">
            <!-- Card de Sele√ß√£o -->
            <div class="card selection-card">
                <h2 class="card-title">üìã Configura√ß√£o do C√°lculo</h2>
                
                <div class="form-grid">
                    <!-- Sele√ß√£o de Cultura -->
                    <div class="form-group">
                        <label for="culturaSelect">
                            <span class="label-icon">ü•¨</span>
                            Cultura
                        </label>
                        <select id="culturaSelect" class="form-control">
                            <option value="">Selecione uma cultura...</option>
                        </select>
                    </div>

                    <!-- N√∫mero de Plantas -->
                    <div class="form-group">
                        <label for="numPlantas">
                            <span class="label-icon">üåø</span>
                            N√∫mero de Plantas
                        </label>
                        <input type="number" id="numPlantas" class="form-control" min="1" placeholder="Ex: 100">
                    </div>
                </div>

                <!-- Sele√ß√£o de Nutrientes (Checkboxes) -->
                <div class="nutrientes-section">
                    <h3 class="section-title">‚öóÔ∏è Selecione os Nutrientes a Calcular</h3>
                    <div class="checkboxes-grid">
                        <label class="checkbox-label">
                            <input type="checkbox" id="checkbox_N" value="N">
                            <span>Nitrog√™nio (N)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="checkbox_P2O5" value="P2O5">
                            <span>F√≥sforo (P‚ÇÇO‚ÇÖ)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="checkbox_K2O" value="K2O">
                            <span>Pot√°ssio (K‚ÇÇO)</span>
                        </label>
                    </div>
                </div>

                <!-- Campos para cada Nutriente -->
                <div id="nutrientesContainer">
                    <!-- Nitrog√™nio (N) -->
                    <div id="container_N" class="nutriente-container hidden">
                        <h4 class="nutriente-title">üåø Nitrog√™nio (N)</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="tipo_N">
                                    <span class="label-icon">üì¶</span>
                                    Tipo de Produto
                                </label>
                                <select id="tipo_N" class="form-control" onchange="handleTipoProdutoChange('N')">
                                    <option value="">Selecione o tipo...</option>
                                    <option value="simples">Produto Simples (% do nutriente)</option>
                                    <option value="npk">Formula√ß√£o NPK (ex: 04-14-08)</option>
                                </select>
                            </div>
                        </div>
                        <div id="inputSimples_N" class="form-group hidden">
                            <label for="percentual_N">
                                <span class="label-icon">%</span>
                                Porcentagem de N no Produto
                            </label>
                            <input type="number" id="percentual_N" class="form-control" min="0.1" max="100" step="0.1" placeholder="Ex: 45.5" oninput="validateForm()">
                            <small class="form-hint">Digite a porcentagem de N presente no produto comercial</small>
                        </div>
                        <div id="inputNPK_N" class="form-group hidden">
                            <label for="npk_N">
                                <span class="label-icon">üß™</span>
                                Formula√ß√£o NPK
                            </label>
                            <input type="text" id="npk_N" class="form-control" placeholder="Ex: 04-14-08" pattern="\d{1,2}-\d{1,2}-\d{1,2}" oninput="validateForm()">
                            <small class="form-hint">Formato: N-P‚ÇÇO‚ÇÖ-K‚ÇÇO (ex: 04-14-08). O primeiro n√∫mero ser√° usado para N.</small>
                        </div>
                    </div>

                    <!-- F√≥sforo (P‚ÇÇO‚ÇÖ) -->
                    <div id="container_P2O5" class="nutriente-container hidden">
                        <h4 class="nutriente-title">üåø F√≥sforo (P‚ÇÇO‚ÇÖ)</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="tipo_P2O5">
                                    <span class="label-icon">üì¶</span>
                                    Tipo de Produto
                                </label>
                                <select id="tipo_P2O5" class="form-control" onchange="handleTipoProdutoChange('P2O5')">
                                    <option value="">Selecione o tipo...</option>
                                    <option value="simples">Produto Simples (% do nutriente)</option>
                                    <option value="npk">Formula√ß√£o NPK (ex: 04-14-08)</option>
                                </select>
                            </div>
                        </div>
                        <div id="inputSimples_P2O5" class="form-group hidden">
                            <label for="percentual_P2O5">
                                <span class="label-icon">%</span>
                                Porcentagem de P‚ÇÇO‚ÇÖ no Produto
                            </label>
                            <input type="number" id="percentual_P2O5" class="form-control" min="0.1" max="100" step="0.1" placeholder="Ex: 45.5" oninput="validateForm()">
                            <small class="form-hint">Digite a porcentagem de P‚ÇÇO‚ÇÖ presente no produto comercial</small>
                        </div>
                        <div id="inputNPK_P2O5" class="form-group hidden">
                            <label for="npk_P2O5">
                                <span class="label-icon">üß™</span>
                                Formula√ß√£o NPK
                            </label>
                            <input type="text" id="npk_P2O5" class="form-control" placeholder="Ex: 04-14-08" pattern="\d{1,2}-\d{1,2}-\d{1,2}" oninput="validateForm()">
                            <small class="form-hint">Formato: N-P‚ÇÇO‚ÇÖ-K‚ÇÇO (ex: 04-14-08). O segundo n√∫mero ser√° usado para P‚ÇÇO‚ÇÖ.</small>
                        </div>
                    </div>

                    <!-- Pot√°ssio (K‚ÇÇO) -->
                    <div id="container_K2O" class="nutriente-container hidden">
                        <h4 class="nutriente-title">üåø Pot√°ssio (K‚ÇÇO)</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="tipo_K2O">
                                    <span class="label-icon">üì¶</span>
                                    Tipo de Produto
                                </label>
                                <select id="tipo_K2O" class="form-control" onchange="handleTipoProdutoChange('K2O')">
                                    <option value="">Selecione o tipo...</option>
                                    <option value="simples">Produto Simples (% do nutriente)</option>
                                    <option value="npk">Formula√ß√£o NPK (ex: 04-14-08)</option>
                                </select>
                            </div>
                        </div>
                        <div id="inputSimples_K2O" class="form-group hidden">
                            <label for="percentual_K2O">
                                <span class="label-icon">%</span>
                                Porcentagem de K‚ÇÇO no Produto
                            </label>
                            <input type="number" id="percentual_K2O" class="form-control" min="0.1" max="100" step="0.1" placeholder="Ex: 45.5" oninput="validateForm()">
                            <small class="form-hint">Digite a porcentagem de K‚ÇÇO presente no produto comercial</small>
                        </div>
                        <div id="inputNPK_K2O" class="form-group hidden">
                            <label for="npk_K2O">
                                <span class="label-icon">üß™</span>
                                Formula√ß√£o NPK
                            </label>
                            <input type="text" id="npk_K2O" class="form-control" placeholder="Ex: 04-14-08" pattern="\d{1,2}-\d{1,2}-\d{1,2}" oninput="validateForm()">
                            <small class="form-hint">Formato: N-P‚ÇÇO‚ÇÖ-K‚ÇÇO (ex: 04-14-08). O terceiro n√∫mero ser√° usado para K‚ÇÇO.</small>
                        </div>
                    </div>
                </div>

                <!-- Bot√£o Calcular -->
                <button type="button" id="calcularBtn" class="btn-calculate">
                    <span>üßÆ</span> Calcular
                </button>
            </div>

            <!-- Card de Resultado -->
            <div id="resultCard" class="card result-card hidden">
                <h2 class="card-title">üìä Resultado do C√°lculo</h2>
                
                <div class="result-summary">
                    <div class="result-item">
                        <span class="result-label">Cultura:</span>
                        <span id="resultCultura" class="result-value"></span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">N√∫mero de Plantas:</span>
                        <span id="resultPlantas" class="result-value"></span>
                    </div>
                </div>

                <!-- Aba expans√≠vel para c√°lculos detalhados -->
                <div class="calculation-accordion">
                    <button class="accordion-toggle" onclick="toggleCalculationDetails()">
                        <span>üìê Ver C√°lculo Detalhado (Convers√£o Agron√¥mica)</span>
                        <span class="accordion-icon" id="accordionIcon">‚ñº</span>
                    </button>
                    <div id="calculationDetails" class="accordion-content hidden">
                        <div id="calculationSteps" class="calculation-steps"></div>
                    </div>
                </div>

                <div class="final-result">
                    <h3 style="margin-bottom: 16px; color: var(--white);">üì¶ Quantidade de Produto Comercial Necess√°ria:</h3>
                    <div id="finalResultsContainer" class="final-results-container"></div>
                </div>
            </div>

            </div>

            <!-- Aba Tratos Culturais -->
            <div id="tab-tratos" class="tab-content hidden">
                <div class="card tratos-card">
                    <h2 class="card-title">üìö Tratos Culturais e Informa√ß√µes das Culturas</h2>
                    
                    <div class="tratos-search">
                        <input type="text" id="tratosSearch" class="form-control" placeholder="üîç Buscar cultura..." oninput="searchTratos()">
                    </div>

                    <div id="tratosList" class="tratos-list">
                        <!-- Lista de culturas ser√° gerada dinamicamente -->
                    </div>

                    <div id="tratosDetails" class="tratos-details hidden">
                        <button class="btn-back" onclick="hideTratosDetails()">‚Üê Voltar</button>
                        <div id="tratosContent"></div>
                    </div>

                    <div class="pdf-viewer-section">
                        <h3>üìñ Manual Completo</h3>
                        <p>Para informa√ß√µes detalhadas sobre todas as culturas, consulte o manual completo:</p>
                        <div id="pdfContainer">
                            <p class="pdf-placeholder">PDF ser√° carregado aqui quando dispon√≠vel</p>
                            <!-- O PDF ser√° carregado aqui via iframe ou embed -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Aba Ajuda (Como Usar) -->
            <div id="tab-ajuda" class="tab-content hidden">
            <!-- Card Informativo -->
            <div class="card info-card">
                <h2 class="card-title">‚ÑπÔ∏è Como Encontrar a Informa√ß√£o na Embalagem</h2>
                
                <!-- Se√ß√£o Produto Simples -->
                <div class="info-section">
                    <h3 class="info-section-title">üì¶ Produto Simples (% do Nutriente)</h3>
                    <div class="info-section-content">
                        <div class="info-text-left">
                            <p><strong>Onde encontrar:</strong></p>
                            <p>A porcentagem do nutriente aparece em um <strong>quadradinho no verso da embalagem</strong> (parte de tr√°s do saco).</p>
                            <p><strong>Exemplo:</strong> Procure por "45% de N" ou "20% de P‚ÇÇO‚ÇÖ" dentro de um quadrado ou tabela nutricional.</p>
                        </div>
                        <div class="info-visual">
                            <div class="embalagem-image-container">
                                <img src="adubo simples.png" alt="Exemplo de embalagem produto simples - verso com quadradinho" class="embalagem-example-image">
                                <div class="seta-indicativa">‚Üê Procure aqui (verso da embalagem)</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Se√ß√£o NPK -->
                <div class="info-section">
                    <h3 class="info-section-title">üß™ Formula√ß√£o NPK</h3>
                    <div class="info-section-content">
                        <div class="info-text-left">
                            <p><strong>Onde encontrar:</strong></p>
                            <p>A formula√ß√£o NPK aparece <strong>na frente da embalagem</strong>, geralmente em destaque.</p>
                            <p><strong>Formato:</strong> Tr√™s n√∫meros separados por h√≠fen, como "04-14-08".</p>
                            <p><strong>O que significa:</strong></p>
                            <ul>
                                <li><strong>Primeiro n√∫mero:</strong> Porcentagem de Nitrog√™nio (N)</li>
                                <li><strong>Segundo n√∫mero:</strong> Porcentagem de F√≥sforo (P‚ÇÇO‚ÇÖ)</li>
                                <li><strong>Terceiro n√∫mero:</strong> Porcentagem de Pot√°ssio (K‚ÇÇO)</li>
                            </ul>
                        </div>
                        <div class="info-visual">
                            <div class="embalagem-image-container">
                                <img src="formuladonpk.png" alt="Exemplo de embalagem NPK - frente com formula√ß√£o" class="embalagem-example-image">
                                <div class="seta-indicativa">‚Üê Procure aqui (frente da embalagem)</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <p>¬© 2024 Calculadora de Aduba√ß√£o NPK | Desenvolvido para profissionais da agricultura</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>

